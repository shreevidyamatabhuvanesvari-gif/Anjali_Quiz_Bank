<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>ЁЯУШ Anjali Quiz Bank тАУ Control Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="../manifest.json">

  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #f6f6ff;
      margin: 0;
      padding: 0;
    }
    header {
      background: #8b2d2d;
      color: #fff;
      text-align: center;
      padding: 12px;
      font-size: 20px;
      font-weight: bold;
    }
    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
      color: #8b2d2d;
      display: block;
      margin-top: 12px;
    }
    select, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    textarea {
      height: 180px;
      resize: vertical;
      font-family: monospace;
    }
    button {
      background: #8b2d2d;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }
    button:hover {
      opacity: 0.9;
    }
    .note {
      background: #fff9e6;
      padding: 10px;
      border-radius: 6px;
      font-size: 14px;
      margin-top: 10px;
      color: #555;
    }
    footer {
      text-align: center;
      padding: 10px;
      font-size: 13px;
      color: #777;
    }
  </style>
</head>
<body>

  <header>ЁЯУШ Anjali Quiz Bank тАУ Control Panel</header>

  <div class="container">
    <label for="subject">рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ:</label>
    <select id="subject">
      <option value="">-- Select Subject --</option>
    </select>

    <label for="subtopic">рдЙрдк-рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ:</label>
    <select id="subtopic">
      <option value="">-- Select Subtopic --</option>
    </select>

    <label for="type">рдкреНрд░рд╢реНрди рдХрд╛ рдкреНрд░рдХрд╛рд░ рдЪреБрдиреЗрдВ:</label>
    <select id="type">
      <option value="mcq">ЁЯУШ MCQ (рдмрд╣реБрд╡рд┐рдХрд▓реНрдкреАрдп рдкреНрд░рд╢реНрди)</option>
      <option value="one-liner">ЁЯУМ One Liner (рдПрдХ рдкрдВрдХреНрддрд┐ рдкреНрд░рд╢реНрди)</option>
    </select>

    <label for="questionData">рдкреНрд░рд╢реНрди рджрд░реНрдЬ рдХрд░реЗрдВ:</label>
    <textarea id="questionData" placeholder="MCQ рдХреЗ рд▓рд┐рдП рдЙрджрд╛рд╣рд░рдг:
Q) рднрд╛рд░рдд рдХреА рд░рд╛рдЬрдзрд╛рдиреА рдХреНрдпрд╛ рд╣реИ?
A) рджрд┐рд▓реНрд▓реА
B) рдореБрдВрдмрдИ
C) рдХреЛрд▓рдХрд╛рддрд╛
D) рдЪреЗрдиреНрдирдИ
Answer: A
Exp: рджрд┐рд▓реНрд▓реА рднрд╛рд░рдд рдХреА рд░рд╛рдЬрдзрд╛рдиреА рд╣реИред

рдпрд╛ One-Liner рдХреЗ рд▓рд┐рдП:
рднрд╛рд░рдд рдХрд╛ рд╕рдмрд╕реЗ рдмрдбрд╝рд╛ рд░рд╛рдЬреНрдп рд░рд╛рдЬрд╕реНрдерд╛рди рд╣реИред"></textarea>

    <button id="saveBtn">ЁЯТ╛ рд╕реЗрд╡ рдХрд░реЗрдВ</button>

    <div class="note">
      ЁЯТб *рдиреЛрдЯ:*  
      рдЖрдк рдПрдХ рд╕рд╛рде рдХрдИ рдкреНрд░рд╢реНрди рджрд░реНрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рд▓рд╛рдЗрди рдмреНрд░реЗрдХ рд╕реЗ рдЕрд▓рдЧ)ред  
      рдЕрднреА рд╕реЗрд╡ рдХрд┐рдП рдЧрдП рдкреНрд░рд╢реНрди рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рд▓реЛрдХрд▓ рд░реВрдк рд╕реЗ рд╕реЗрд╡ рд╣реЛрдВрдЧреЗред  
      рдЕрдЧрд▓реЗ рдЪрд░рдг рдореЗрдВ рдпрд╣ JSON GitHub рдбреЗрдЯрд╛ рдореЗрдВ merge рд╣реЛрдЧрд╛ред
    </div>
  </div>

  <footer>┬й 2026 Anjali Quiz Bank | Control Panel</footer>

  <script>
    // --- Step 1: рд╡рд┐рд╖рдп рд▓реЛрдб рдХрд░реЗрдВ ---
    const subjects = {
      "General Knowledge": ["History", "Geography", "Polity", "Economy", "Science", "Current Affairs"],
      "General Hindi": ["рд╡рд░реНрдгрдорд╛рд▓рд╛", "рд╕рдВрдзрд┐", "рд╕рдорд╛рд╕", "рдЙрдкрд╕рд░реНрдЧ", "рдкреНрд░рддреНрдпрдп", "рдкрд░реНрдпрд╛рдпрд╡рд╛рдЪреА", "рд╡рд┐рд▓реЛрдо", "рдЕрдиреЗрдХрд╛рд░реНрдереА", "рддрддреНрд╕рдо-рддрджреНрднрд╡", "рд▓реЛрдХреЛрдХреНрддрд┐рдпрд╛рдБ", "рдореБрд╣рд╛рд╡рд░реЗ", "рд╡рд╛рдХреНрдп рд╢реБрджреНрдзрд┐", "рд╡рд░реНрддрдиреА", "рд╡рд╛рдХреНрдпрд╛рдВрд╢", "рд╢рдмреНрдж рд╢реБрджреНрдзрд┐", "рдХрд╛рд░рдХ", "рд▓рд┐рдВрдЧ", "рд╡рдЪрди", "рдХрд╛рд▓", "рд░рд╕", "рдЫрдВрдж", "рдЕрд▓рдВрдХрд╛рд░", "рдЕрдкрдард┐рдд рдЧрджреНрдпрд╛рдВрд╢", "рдЕрдкрдард┐рдд рдкрджреНрдпрд╛рдВрд╢", "рд╡рд╛рдХреНрдп рд░реВрдкрд╛рдВрддрд░рдг", "рд╡рд╛рдХреНрдп рд╕рдВрдпреЛрдЬрди"],
      "Numerical & Mental Ability": ["рд╕рдВрдЦреНрдпрд╛ рдкрджреНрдзрддрд┐", "рджрд╢рдорд▓рд╡ рдПрд╡рдВ рднрд┐рдиреНрди", "рдкреНрд░рддрд┐рд╢рдд", "рд▓рд╛рдн рдФрд░ рд╣рд╛рдирд┐", "рд╕рд╛рдзрд╛рд░рдг рдмреНрдпрд╛рдЬ", "рдЪрдХреНрд░рд╡реГрджреНрдзрд┐ рдмреНрдпрд╛рдЬ", "рдЕрдиреБрдкрд╛рдд рдФрд░ рд╕рдорд╛рдиреБрдкрд╛рдд", "рдФрд╕рдд", "рд╕рдордп рдФрд░ рдХрд╛рд░реНрдп", "рд╕рдордп рдФрд░ рджреВрд░реА", "рдЧрддрд┐", "рдЯреНрд░реЗрди", "рдирд╛рд╡ рдФрд░ рдзрд╛рд░рд╛", "рдорд┐рд╢реНрд░рдг", "рдЖрдпреБ", "рдХреНрд╖реЗрддреНрд░рдлрд▓", "рдкрд░рд┐рдорд╛рдк", "рдЖрдпрддрди", "рд╕рд╛рдВрдЦреНрдпрд┐рдХреА", "рд╕рд░рд▓реАрдХрд░рдг", "LCM", "HCF", "рдмреАрдЬрдЧрдгрд┐рдд", "рд╕рдореАрдХрд░рдг", "рд╢реНрд░реЗрдгреА", "рдЖрдВрдХрдбрд╝рд╛"],
      "Mental Aptitude / Reasoning": ["рд╕рд╛рджреГрд╢реНрдп", "рд╡рд░реНрдЧреАрдХрд░рдг", "рд╢реНрд░реЗрдгреА", "рдХреЛрдбрд┐рдВрдЧ", "рд░рдХреНрдд рд╕рдВрдмрдВрдз", "рджрд┐рд╢рд╛", "рдХреНрд░рдо", "рдмреИрдардХ", "рдкрд╣реЗрд▓реА", "рдХрдерди", "рддрд░реНрдХ", "рдХрд╛рд░рдг", "рдирд┐рд░реНрдгрдп", "рджрд░реНрдкрдг", "рдЬрд▓", "рдШрди", "рдХрд╛рдЧрдЬ", "рдЪрд┐рддреНрд░", "рдЕрдХреНрд╖рд░", "рд╕рдВрдЦреНрдпрд╛", "рд╡реЗрди", "рдбреЗрдЯрд╛", "рдШрдбрд╝реА", "рд▓реБрдкреНрдд", "рддрд╛рд░реНрдХрд┐рдХ", "рдЧреИрд░ рдореМрдЦрд┐рдХ"]
    };

    const subjectSelect = document.getElementById("subject");
    const subtopicSelect = document.getElementById("subtopic");
    const saveBtn = document.getElementById("saveBtn");

    // --- Step 2: рд╡рд┐рд╖рдп Dropdown Populate рдХрд░реЗрдВ ---
    Object.keys(subjects).forEach(sub => {
      const opt = document.createElement("option");
      opt.value = sub;
      opt.textContent = sub;
      subjectSelect.appendChild(opt);
    });

    // --- Step 3: рдЙрдкрд╡рд┐рд╖рдп Dropdown рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ ---
    subjectSelect.addEventListener("change", () => {
      const subs = subjects[subjectSelect.value] || [];
      subtopicSelect.innerHTML = `<option value="">-- Select Subtopic --</option>`;
      subs.forEach(st => {
        const o = document.createElement("option");
        o.value = st;
        o.textContent = st;
        subtopicSelect.appendChild(o);
      });
    });

    // --- Step 4: рдкреНрд░рд╢реНрди рд╕реЗрд╡ (рд▓реЛрдХрд▓ JSON рдмрдирд╛рдирд╛) ---
    saveBtn.addEventListener("click", () => {
      const subject = subjectSelect.value;
      const subtopic = subtopicSelect.value;
      const type = document.getElementById("type").value;
      const text = document.getElementById("questionData").value.trim();

      if (!subject || !subtopic || !text) {
        alert("рдХреГрдкрдпрд╛ рд╕рднреА рдлрд╝реАрд▓реНрдб рднрд░реЗрдВ!");
        return;
      }

      const lines = text.split("\n").filter(x => x.trim() !== "");
      const savedData = JSON.parse(localStorage.getItem("anjaliTempData") || "{}");

      savedData[subject] = savedData[subject] || {};
      savedData[subject][subtopic] = savedData[subject][subtopic] || { mcq: [], one_liner: [] };

      if (type === "mcq") {
        let qset = [];
        let buffer = {};
        lines.forEach(line => {
          if (line.startsWith("Q)")) buffer.q = line.replace("Q)", "").trim();
          else if (line.startsWith("A)")) buffer.a = line.replace("A)", "").trim();
          else if (line.startsWith("B)")) buffer.b = line.replace("B)", "").trim();
          else if (line.startsWith("C)")) buffer.c = line.replace("C)", "").trim();
          else if (line.startsWith("D)")) buffer.d = line.replace("D)", "").trim();
          else if (line.startsWith("Answer:")) buffer.correct = line.replace("Answer:", "").trim();
          else if (line.startsWith("Exp:")) {
            buffer.exp = line.replace("Exp:", "").trim();
            qset.push(buffer);
            buffer = {};
          }
        });
        savedData[subject][subtopic].mcq.push(...qset);
      } else {
        lines.forEach(l => savedData[subject][subtopic].one_liner.push({ q: l }));
      }

      localStorage.setItem("anjaliTempData", JSON.stringify(savedData));
      alert("тЬЕ рдкреНрд░рд╢реНрди рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕реЗрд╡ рдХрд┐рдП рдЧрдП (рд▓реЛрдХрд▓ рд░реВрдк рдореЗрдВ)!");
      document.getElementById("questionData").value = "";
    });
  </script>
</body>
  </html>
